import{S as z,i as A,s as K,e as S,t as B,c as H,a as E,h as I,d as v,b as f,g as w,G as x,j as Q,O as D,P as M,I as O,f as W,H as V,J as Z,k as q,l as G,m as C,V as j,R as ee,a5 as te,a6 as le,a7 as ae,w as se,x as ne,y as re,q as oe,o as ie,B as ce}from"../chunks/vendor-5019805d.js";import{b as he}from"../chunks/stores-4fbc6282.js";function T(l,a,o){const n=l.slice();return n[14]=a[o],n}function J(l,a,o){const n=l.slice();return n[17]=a[o],n}function L(l,a,o){const n=l.slice();return n[14]=a[o],n}function P(l){let a,o=l[14].count+"",n,h,i;return{c(){a=S("div"),n=B(o),h=B(" movies"),this.h()},l(_){a=H(_,"DIV",{id:!0,class:!0});var s=E(a);n=I(s,o),h=I(s," movies"),s.forEach(v),this.h()},h(){f(a,"id",i="rating-"+l[14].rating),f(a,"class","tooltip svelte-xmfxrk")},m(_,s){w(_,a,s),x(a,n),x(a,h)},p(_,s){s&1&&o!==(o=_[14].count+"")&&Q(n,o),s&1&&i!==(i="rating-"+_[14].rating)&&f(a,"id",i)},d(_){_&&v(a)}}}function X(l){let a,o,n,h=l[17]+"",i,_,s;return{c(){a=D("g"),o=D("line"),n=D("text"),i=B(h),this.h()},l(r){a=M(r,"g",{class:!0,transform:!0});var c=E(a);o=M(c,"line",{x2:!0,class:!0}),E(o).forEach(v),n=M(c,"text",{});var u=E(n);i=I(u,h),u.forEach(v),c.forEach(v),this.h()},h(){f(o,"x2","100%"),f(o,"class","svelte-xmfxrk"),f(a,"class",_="tick-"+l[17]+" svelte-xmfxrk"),f(a,"transform",s="translate(0, "+l[1](l[17])+")")},m(r,c){w(r,a,c),x(a,o),x(a,n),x(n,i)},p:O,d(r){r&&v(a)}}}function Y(l){let a,o,n=l[14].rating+"",h,i,_,s,r,c,u,b,d,e,p,t,m;function y(...g){return l[7](l[14],...g)}function $(...g){return l[8](l[14],...g)}return{c(){a=D("g"),o=D("text"),h=B(n),s=D("g"),r=D("line"),c=D("rect"),this.h()},l(g){a=M(g,"g",{transform:!0});var k=E(a);o=M(k,"text",{style:!0,x:!0});var F=E(o);h=I(F,n),F.forEach(v),k.forEach(v),s=M(g,"g",{class:!0});var R=E(s);r=M(R,"line",{y2:!0,class:!0}),E(r).forEach(v),c=M(R,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),E(c).forEach(v),R.forEach(v),this.h()},h(){W(o,"text-anchor","center"),f(o,"x",i=(l[2].bandwidth()-4)/2),f(a,"transform",_="translate("+l[2](l[14].rating)+", "+N+")"),f(r,"y2",N),f(r,"class","svelte-xmfxrk"),f(c,"class","bar svelte-xmfxrk"),f(c,"x",u=l[2](l[14].rating)),f(c,"y",b=l[1](l[14].count)),f(c,"width",d=l[2].bandwidth()),f(c,"height",e=l[1](0)-l[1](l[14].count)),f(s,"class",p="rating-"+l[14].rating+" svelte-xmfxrk")},m(g,k){w(g,a,k),x(a,o),x(o,h),w(g,s,k),x(s,r),x(s,c),t||(m=[V(c,"mouseover",y),V(c,"mouseleave",$),V(c,"focus",l[6])],t=!0)},p(g,k){l=g,k&1&&n!==(n=l[14].rating+"")&&Q(h,n),k&1&&_!==(_="translate("+l[2](l[14].rating)+", "+N+")")&&f(a,"transform",_),k&1&&u!==(u=l[2](l[14].rating))&&f(c,"x",u),k&1&&b!==(b=l[1](l[14].count))&&f(c,"y",b),k&1&&e!==(e=l[1](0)-l[1](l[14].count))&&f(c,"height",e),k&1&&p!==(p="rating-"+l[14].rating+" svelte-xmfxrk")&&f(s,"class",p)},d(g){g&&v(a),g&&v(s),t=!1,Z(m)}}}function _e(l){let a,o,n,h,i,_,s=l[0],r=[];for(let e=0;e<s.length;e+=1)r[e]=P(L(l,s,e));let c=l[3],u=[];for(let e=0;e<c.length;e+=1)u[e]=X(J(l,c,e));let b=l[0],d=[];for(let e=0;e<b.length;e+=1)d[e]=Y(T(l,b,e));return{c(){a=S("h2"),o=B("Number of movies by rating"),n=q();for(let e=0;e<r.length;e+=1)r[e].c();h=q(),i=D("svg");for(let e=0;e<u.length;e+=1)u[e].c();_=G();for(let e=0;e<d.length;e+=1)d[e].c();this.h()},l(e){a=H(e,"H2",{class:!0});var p=E(a);o=I(p,"Number of movies by rating"),p.forEach(v),n=C(e);for(let m=0;m<r.length;m+=1)r[m].l(e);h=C(e),i=M(e,"svg",{width:!0,height:!0,class:!0});var t=E(i);for(let m=0;m<u.length;m+=1)u[m].l(t);_=G();for(let m=0;m<d.length;m+=1)d[m].l(t);t.forEach(v),this.h()},h(){f(a,"class","svelte-xmfxrk"),f(i,"width",U),f(i,"height",N+50),f(i,"class","svelte-xmfxrk")},m(e,p){w(e,a,p),x(a,o),w(e,n,p);for(let t=0;t<r.length;t+=1)r[t].m(e,p);w(e,h,p),w(e,i,p);for(let t=0;t<u.length;t+=1)u[t].m(i,null);x(i,_);for(let t=0;t<d.length;t+=1)d[t].m(i,null)},p(e,[p]){if(p&1){s=e[0];let t;for(t=0;t<s.length;t+=1){const m=L(e,s,t);r[t]?r[t].p(m,p):(r[t]=P(m),r[t].c(),r[t].m(h.parentNode,h))}for(;t<r.length;t+=1)r[t].d(1);r.length=s.length}if(p&10){c=e[3];let t;for(t=0;t<c.length;t+=1){const m=J(e,c,t);u[t]?u[t].p(m,p):(u[t]=X(m),u[t].c(),u[t].m(i,_))}for(;t<u.length;t+=1)u[t].d(1);u.length=c.length}if(p&119){b=e[0];let t;for(t=0;t<b.length;t+=1){const m=T(e,b,t);d[t]?d[t].p(m,p):(d[t]=Y(m),d[t].c(),d[t].m(i,null))}for(;t<d.length;t+=1)d[t].d(1);d.length=b.length}},i:O,o:O,d(e){e&&v(a),e&&v(n),j(r,e),e&&v(h),e&&v(i),j(u,e),j(d,e)}}}const N=500,U=500;function ue(l,a,o){let n;ee(l,he,y=>o(10,n=y));const h={top:20,right:20,bottom:20,left:20};let i=[];for(let y=0;y<4;y++){let $=0,g={};n.forEach(k=>{k.rating==y&&(g.rating=y,g.count=$+=1)}),i=[...i,g]}const _=te(i.map(y=>y.count)),s=_+500-_%500,r=le().domain([0,s]).range([N-h.bottom,h.top]),c=ae().domain(i.map(y=>y.rating)).range([h.left,U-h.right]).padding(.5),u=[0];let b=0;for(;b<s;)b+=500,u.push(b);const d=(y,$)=>{const g=document.getElementById(`rating-${$}`);g.style.left=y.clientX+"px",g.style.top=y.clientY+100+"px",g.style.opacity="100"},e=(y,$)=>{const g=document.getElementById(`rating-${$}`);g.style.opacity="0"};return[i,r,c,u,d,e,()=>{},(y,$)=>d($,y.rating),(y,$)=>e($,y.rating)]}class fe extends z{constructor(a){super(),A(this,a,ue,_e,K,{})}}function me(l){let a,o,n,h,i,_;return a=new fe({}),{c(){se(a.$$.fragment),o=q(),n=S("div"),h=S("h2"),i=B("More data to come..."),this.h()},l(s){ne(a.$$.fragment,s),o=C(s),n=H(s,"DIV",{});var r=E(n);h=H(r,"H2",{class:!0});var c=E(h);i=I(c,"More data to come..."),c.forEach(v),r.forEach(v),this.h()},h(){f(h,"class","svelte-1s5iwrk")},m(s,r){re(a,s,r),w(s,o,r),w(s,n,r),x(n,h),x(h,i),_=!0},p:O,i(s){_||(oe(a.$$.fragment,s),_=!0)},o(s){ie(a.$$.fragment,s),_=!1},d(s){ce(a,s),s&&v(o),s&&v(n)}}}class de extends z{constructor(a){super(),A(this,a,null,me,K,{})}}export{de as default};
